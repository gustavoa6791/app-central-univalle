<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cronómetro de Tiempos y Movimientos</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
        .timer-display {
            font-variant-numeric: tabular-nums;
        }
        .table-container {
            max-height: calc(100vh - 350px);
            overflow: auto;
        }
        .highlight {
            background-color: #dbeafe !important;
            box-shadow: inset 0 0 0 2px #3b82f6;
        }
        th, td {
            white-space: nowrap;
            text-align: center;
        }
        .task-header {
            text-align: center;
        }
        .btn-primary { @apply bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500; }
        .btn-secondary { @apply bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-500; }
        .btn-success { @apply bg-green-600 text-white hover:bg-green-700 focus:ring-green-500; }
        .btn-warning { @apply bg-yellow-500 text-white hover:bg-yellow-600 focus:ring-yellow-400; }
        .btn-danger { @apply bg-red-600 text-white hover:bg-red-700 focus:ring-red-500; }
        
        /* CORRECCIÓN DEFINITIVA: Se aplica el estilo directamente al estado :disabled del botón */
        button:disabled {
            @apply !bg-gray-400 !text-gray-200 !cursor-not-allowed;
        }
    </style>
</head>
<body class="p-4 lg:p-6">
    <div class="max-w-screen-2xl mx-auto bg-white rounded-xl shadow-lg p-5 lg:p-8">
        
        <header class="mb-6">
            <h1 class="text-3xl font-bold text-gray-800">Formato para Toma de Tiempos</h1>
            <p class="text-gray-500">Barra del Restaurante Universitario - Área: Sopas</p>
        </header>

        <div id="setup-section" class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6 p-4 border rounded-lg bg-gray-50">
            <div>
                <label for="encargado" class="block text-sm font-medium text-gray-700">Encargado</label>
                <input type="text" id="encargado" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm" placeholder="Nombre del responsable">
            </div>
            <div>
                <label for="fecha" class="block text-sm font-medium text-gray-700">Fecha</label>
                <input type="text" id="fecha" class="mt-1 block w-full rounded-md border-gray-300 bg-gray-200 shadow-sm sm:text-sm" readonly>
            </div>
             <div>
                <label for="ciclos" class="block text-sm font-medium text-gray-700">Número de Ciclos</label>
                <input type="number" id="ciclos" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm" value="30" min="1">
            </div>
        </div>

        <div class="flex flex-col lg:flex-row gap-8">
            <!-- Columna de Controles -->
            <div class="space-y-6 lg:w-1/3">
                <div class="bg-gray-800 text-white rounded-xl p-6 text-center">
                    <div class="text-lg font-semibold uppercase tracking-wider text-gray-400">Cronómetro de Sesión</div>
                    <div id="timer-display" class="timer-display text-7xl font-bold my-3">0:00:00</div>
                    <div class="text-gray-400">MM:SS:ms</div>
                </div>
                
                <div class="bg-gray-100 rounded-xl p-6 text-center">
                    <div class="text-lg font-semibold text-gray-600">Ciclo Actual</div>
                    <div id="cycle-counter" class="text-5xl font-bold my-2 text-blue-600">1</div>
                </div>

                <div class="grid grid-cols-1 gap-4">
                    <button id="session-btn" class="w-full py-3 px-4 rounded-lg font-semibold text-lg shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors btn-primary">Iniciar Sesión</button>
                    <button id="record-btn" class="w-full py-4 px-4 rounded-lg font-semibold text-xl shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors" disabled>Registrar Tiempo</button>
                    <button id="change-cycle-btn" class="w-full py-3 px-4 rounded-lg font-semibold text-lg shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors btn-warning" disabled>Cambiar Ciclo</button>
                    <button id="export-btn" class="w-full py-3 px-4 rounded-lg font-semibold text-lg shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors btn-secondary" disabled>Exportar a CSV</button>
                </div>
                
                <div class="grid grid-cols-2 gap-4 text-sm text-center text-gray-600">
                    <div><div class="font-bold">Hora Inicio:</div><div id="start-time-display">-</div></div>
                    <div><div class="font-bold">Hora Fin:</div><div id="end-time-display">-</div></div>
                </div>
            </div>
            
            <!-- Columna de la Tabla -->
            <div class="lg:w-2/3">
                <div class="table-container border rounded-lg">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-100 sticky top-0">
                            <tr>
                                <th rowspan="2" class="px-3 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider align-middle">Ciclos</th>
                                <th colspan="2" class="px-4 py-2 text-xs font-bold text-gray-600 uppercase tracking-wider border-l border-r">Tomar el plato</th>
                                <th colspan="2" class="px-4 py-2 text-xs font-bold text-gray-600 uppercase tracking-wider border-r">Servir la sopa</th>
                                <th colspan="2" class="px-4 py-2 text-xs font-bold text-gray-600 uppercase tracking-wider border-r">Disponerlo en barra</th>
                                <th colspan="2" class="px-4 py-2 text-xs font-bold text-gray-600 uppercase tracking-wider border-r">Limpieza de zona</th>
                                <th colspan="2" class="px-4 py-2 text-xs font-bold text-gray-600 uppercase tracking-wider border-r">Reposición de cambro</th>
                            </tr>
                            <tr>
                                <th class="px-2 py-2 text-xs font-bold text-gray-500 border-l border-r">T</th><th class="px-2 py-2 text-xs font-bold text-gray-500 border-r">L</th>
                                <th class="px-2 py-2 text-xs font-bold text-gray-500 border-r">T</th><th class="px-2 py-2 text-xs font-bold text-gray-500 border-r">L</th>
                                <th class="px-2 py-2 text-xs font-bold text-gray-500 border-r">T</th><th class="px-2 py-2 text-xs font-bold text-gray-500 border-r">L</th>
                                <th class="px-2 py-2 text-xs font-bold text-gray-500 border-r">T</th><th class="px-2 py-2 text-xs font-bold text-gray-500 border-r">L</th>
                                <th class="px-2 py-2 text-xs font-bold text-gray-500 border-r">T</th><th class="px-2 py-2 text-xs font-bold text-gray-500 border-r">L</th>
                            </tr>
                        </thead>
                        <tbody id="time-table-body" class="bg-white divide-y divide-gray-200"></tbody>
                        <tfoot class="bg-gray-100 font-bold">
                            <tr>
                                <td class="px-4 py-3 text-sm text-left">TIEMPO TOTAL</td>
                                <td colspan="2" id="total-0" class="px-4 py-3 text-sm">0:00:00</td>
                                <td colspan="2" id="total-1" class="px-4 py-3 text-sm">0:00:00</td>
                                <td colspan="2" id="total-2" class="px-4 py-3 text-sm">0:00:00</td>
                                <td colspan="2" id="total-3" class="px-4 py-3 text-sm">0:00:00</td>
                                <td colspan="2" id="total-4" class="px-4 py-3 text-sm">0:00:00</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-3 text-sm text-left">N° OBSERVACIONES</td>
                                <td colspan="2" id="obs-0" class="px-4 py-3 text-sm">0</td>
                                <td colspan="2" id="obs-1" class="px-4 py-3 text-sm">0</td>
                                <td colspan="2" id="obs-2" class="px-4 py-3 text-sm">0</td>
                                <td colspan="2" id="obs-3" class="px-4 py-3 text-sm">0</td>
                                <td colspan="2" id="obs-4" class="px-4 py-3 text-sm">0</td>
                            </tr>
                             <tr>
                                <td class="px-4 py-3 text-sm text-left">TIEMPO PROMEDIO</td>
                                <td colspan="2" id="avg-0" class="px-4 py-3 text-sm">0:00:00</td>
                                <td colspan="2" id="avg-1" class="px-4 py-3 text-sm">0:00:00</td>
                                <td colspan="2" id="avg-2" class="px-4 py-3 text-sm">0:00:00</td>
                                <td colspan="2" id="avg-3" class="px-4 py-3 text-sm">0:00:00</td>
                                <td colspan="2" id="avg-4" class="px-4 py-3 text-sm">0:00:00</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-3 text-sm text-left">TIEMPO MÍNIMO</td>
                                <td colspan="2" id="min-0" class="px-4 py-3 text-sm">0:00:00</td>
                                <td colspan="2" id="min-1" class="px-4 py-3 text-sm">0:00:00</td>
                                <td colspan="2" id="min-2" class="px-4 py-3 text-sm">0:00:00</td>
                                <td colspan="2" id="min-3" class="px-4 py-3 text-sm">0:00:00</td>
                                <td colspan="2" id="min-4" class="px-4 py-3 text-sm">0:00:00</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-3 text-sm text-left">TIEMPO MÁXIMO</td>
                                <td colspan="2" id="max-0" class="px-4 py-3 text-sm">0:00:00</td>
                                <td colspan="2" id="max-1" class="px-4 py-3 text-sm">0:00:00</td>
                                <td colspan="2" id="max-2" class="px-4 py-3 text-sm">0:00:00</td>
                                <td colspan="2" id="max-3" class="px-4 py-3 text-sm">0:00:00</td>
                                <td colspan="2" id="max-4" class="px-4 py-3 text-sm">0:00:00</td>
                            </tr>
                        </tfoot>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js" defer></script>
</body>
</html>

